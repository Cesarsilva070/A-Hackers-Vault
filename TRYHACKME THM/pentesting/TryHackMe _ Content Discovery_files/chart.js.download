let apexChart,apexChartAnimations={'enabled':!![]};const showUserAmount=0x32;let chartEl=document['querySelector']('#chart-data');async function updateScoreboard(_0x56b248){const _0xa1243a=_0x56b248;let _0x317ae6=0x2;ctfRoom&&(_0x317ae6+=0x2,document['querySelector']('#scoreboard_table')['classList']='table\x20table-bordered\x20table-condensed\x20table-header-rotated');let _0x3bc9ee=document['querySelector']('#scoreboard_header');if(_0xa1243a['length']>0x0&&Object['keys'](_0xa1243a[0x0]['tasks'])['length']>0x0&&_0x3bc9ee){_0x3bc9ee['innerHTML']='<th\x20class=\x22rotated\x22\x20colspan=\x22'+_0x317ae6+'\x22><div\x20class=\x22rotated-left-edge\x22></div></th>';const _0x5a7d24=_0x56b248[0x0];for(const _0x219f04 of Object['keys'](_0x5a7d24['tasks'])){for(const _0x1ab921 of _0x5a7d24['tasks'][_0x219f04]){_0x3bc9ee['innerHTML']+='<th\x20class=\x22rotated\x22><div\x20class=\x22category-header-0\x22><span>[Task\x20'+_0x219f04+']\x20#'+_0x1ab921['questionNo']+'</span></div></th>';}}_0x3bc9ee['innerHTML']+='<th\x20class=\x22rotated\x22><div\x20class=\x22rotated-right-edge\x22></div></th>';}let _0x3ff6ec=document['querySelector']('#scoreboard_body');_0x3ff6ec&&(_0x3ff6ec['innerHTML']='',_0xa1243a['forEach'](async function(_0x1d99bf,_0x5cfed0){const _0x43774e=_0x1d99bf['rankNo']?_0x1d99bf['rankNo']:_0x5cfed0+0x1;let _0x416f52='<tr\x20class=\x22scoreboard_row\x22>';_0x416f52='<td\x20class=\x22scoreboard_rank\x22>'+_0x43774e+'</td>';if(ctfRoom){teamUni=_0x1d99bf['university'];let _0x4ffce0='';for(let _0x29b097 of _0x1d99bf['members']){_0x4ffce0+='<a\x20class=\x22nocss\x22\x20target=\x22_blank\x22\x20href=\x22/p/'+_0x29b097+'\x22>'+_0x29b097+'</a></br>';}teamUniCode='<img\x20class=\x22uni-icon-very-small\x22\x20data-toggle=\x22tooltip\x22\x20data-html=\x22true\x22\x20title=\x22'+jsUcfirst(teamUni)+'\x22\x20data-placement=\x22right\x22\x20onerror=\x22teamImageRan(this)\x22\x20src=\x22https://assets.tryhackme.com/img/unis/'+teamUni+'.jpg\x22>',_0x416f52+='<td\x20class=\x22scoreboard_name\x22>'+teamUniCode+'</td>',_0x416f52+='<td\x20class=\x22scoreboard_name\x22>'+_0x1d99bf['username']+'</td>',_0x416f52+='<td\x20class=\x22scoreboard_name\x20small\x20faded\x22>'+_0x4ffce0+'</td>';}else _0x416f52+='<td\x20class=\x22scoreboard_name\x22\x20style=\x27line-height:0;\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x27d-inline-block\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22media\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22user-square-img-med\x20mr-2\x22\x20src=\x22'+_0x1d99bf['avatar']+'\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22media-body\x20text-left\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h5\x20class=\x22mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20class=\x22nocss\x22\x20href=\x22/p/'+_0x1d99bf['username']+'\x22>'+_0x1d99bf['username']+'</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h5>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x27m-0\x20size-12\x27><span\x20class=\x22level-simple-design\x20level\x20level-'+_0x1d99bf['level']+'\x22></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>';for(const _0xaa2489 of Object['keys'](_0x1d99bf['tasks'])){for(const _0x42397f of _0x1d99bf['tasks'][_0xaa2489]){let _0x9a3aeb='<i\x20class=\x22fas\x20fa-check-circle\x20scoreboard-points\x22\x20data-toggle=\x22tooltip\x22\x20data-placement=\x22top\x22\x20title=\x22'+_0x42397f['score']+'\x20points\x22></i>';!_0x42397f['correct']&&(_0x9a3aeb='<i\x20class=\x22fas\x20fa-check-circle\x22\x20style=\x22opacity:\x200.2;\x22></i>'),_0x416f52+='<td\x20class=\x22scoreboard_check\x22>'+_0x9a3aeb+'</td>';}}_0x416f52+='<td\x20class=\x22scoreboard_score\x22>'+_0x1d99bf['score']+'</td>',_0x416f52+='</tr>',_0x3ff6ec['innerHTML']+=_0x416f52,$('.scoreboard-points')['tooltip']();})),ctfRoom&&$(function(){$('.uni-icon-very-small')['tooltip']();});}function showChart(_0xeab50f){$['getJSON']('/api/room/scoreboard?code='+_0xeab50f+'&limit=10',async function(_0x10839d){populateChart(_0x10839d);});}function populateChart(_0x1ace86){if(_0x1ace86['length']>0x0){updateScoreboard(_0x1ace86);if(ctfRoom)renderBarChart(_0x1ace86);else{const _0x4efbbe=formatChartData(_0x1ace86);renderLineChart(_0x4efbbe);}}else{const _0x5413a1=document['querySelector']('#scoreboard');_0x5413a1&&(_0x5413a1['innerHTML']='</br><div\x20class=\x22alert\x20alert-info\x22\x20id=\x22ctf-scoreboard\x22\x20role=\x22alert\x22>There\x20are\x20no\x20scores\x20to\x20show\x20yet.</div>',chartEl['innerHTML']='<div\x20class=\x22alert\x20alert-info\x22\x20id=\x22ctf-chart\x22\x20role=\x22alert\x22>No\x20chart\x20data\x20to\x20display.</div>',chartEl['style']['height']='auto');}}function renderBarChart(_0x1aa54){let _0x44e1bf=[],_0xaa227c=[];for(const _0x4a6531 of _0x1aa54){_0x4a6531['score']>0x0&&(_0x44e1bf['push'](_0x4a6531['username']['slice'](0x0,0xc)),_0xaa227c['push'](_0x4a6531['score']));}if(apexChart)apexChart['destroy']();var _0x549540={'series':[{'name':'','data':_0xaa227c}],'dataLabels':{'enabled':![]},'legend':{'show':![]},'plotOptions':{'bar':{'distributed':!![]}},'chart':{'animations':apexChartAnimations,'zoom':{'enabled':![]},'height':0x190,'type':'bar','toolbar':{'show':![]}},'stroke':{'curve':'smooth'},'fill':{'type':'solid','opacity':[0.9]},'markers':{'size':0x0},'xaxis':{'categories':_0x44e1bf,'tooltip':{'enabled':![]},'labels':{'show':!![]}},'selection':{'enabled':![]},'tooltip':{'shared':!![],'intersect':![],'y':{'formatter':function(_0x187d6d){if(typeof _0x187d6d!=='undefined')return _0x187d6d['toFixed'](0x0)+'\x20points';return _0x187d6d;}},'x':{'format':'dd\x20MMM'}}};apexChart=new ApexCharts(chartEl,_0x549540),apexChart['render'](),apexChartAnimations['enabled']=![];}function formatChartData(_0x33606e){let _0x3b9e93=[],_0x479b04=[];for(const _0x55f877 of _0x33606e){_0x479b04['push']({'username':_0x55f877['username'],'currentPoints':0x0,'data':[]});for(const _0x407d31 of Object['keys'](_0x55f877['tasks'])){for(const _0x1f1274 of _0x55f877['tasks'][_0x407d31]){_0x3b9e93['push']({'username':_0x55f877['username'],'points':_0x1f1274['score'],'awarded':_0x1f1274['timeCorrect']});}}}_0x3b9e93=_0x3b9e93=_['sortBy'](_0x3b9e93,'awarded');let _0x5dbd9f=[];for(const _0x537ed6 of _0x3b9e93){if(_0x537ed6['awarded']!=0x0){for(let _0xdb4b4f of _0x479b04){_0xdb4b4f['username']==_0x537ed6['username']?(_0xdb4b4f['currentPoints']+=_0x537ed6['points'],_0xdb4b4f['data']['push'](_0xdb4b4f['currentPoints'])):_0xdb4b4f['data']['push'](_0xdb4b4f['currentPoints']);}_0x5dbd9f['push'](_0x537ed6['awarded']);}}return{'series':_0x479b04,'labels':_0x5dbd9f};}function renderLineChart(_0x15adb5){if(apexChart)apexChart['destroy']();const _0x490215=_0x15adb5['labels'];let _0x17b8b7=[];for(const _0x362606 of _0x490215){const _0x163a33=_0x362606?prettifyDate3(_0x362606):'-';_0x17b8b7['push'](_0x163a33);}const _0x281f7a=_0x15adb5['series'];let _0x18ca4a=[];for(const _0x4c9c17 of _0x281f7a){_0x18ca4a['push']({'name':_0x4c9c17['username'],'type':'line','data':_0x4c9c17['data']});}var _0x317ddd={'series':_0x18ca4a,'chart':{'animations':apexChartAnimations,'zoom':{'enabled':![]},'height':0x15e,'type':'line','toolbar':{'show':![]}},'stroke':{'curve':'smooth'},'fill':{'type':'solid','opacity':[0.35,0x1]},'labels':_0x17b8b7,'markers':{'size':0x0},'xaxis':{'tooltip':{'enabled':![]},'labels':{'show':![]}},'selection':{'enabled':![]},'tooltip':{'shared':!![],'intersect':![],'y':{'formatter':function(_0x16a3e6){if(typeof _0x16a3e6!=='undefined')return _0x16a3e6['toFixed'](0x0)+'\x20points';return _0x16a3e6;}},'x':{'format':'dd\x20MMM'}}};apexChart=new ApexCharts(chartEl,_0x317ddd),apexChart['render'](),apexChartAnimations['enabled']=![];}